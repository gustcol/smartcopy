# SmartCopy Agent Configuration
# Generated by Ansible for {{ ansible_hostname }}
# Network Speed Tier: {{ smartcopy_network_speed }}

[agent]
# Protocol: stdio (for SSH pipe) or tcp (standalone daemon)
protocol = "{{ smartcopy_agent_protocol }}"

{% if smartcopy_agent_protocol == 'tcp' %}
# TCP settings
bind = "{{ smartcopy_agent_bind }}"
port = {{ smartcopy_agent_port }}
{% endif %}

[performance]
# Tuned for {{ smartcopy_network_speed }} network
{% if smartcopy_network_speed == '10g' %}
threads = 8
buffer_size = "16M"
streams = 4
{% elif smartcopy_network_speed == '100g' %}
threads = 32
buffer_size = "64M"
streams = 16
{% elif smartcopy_network_speed == '200g' %}
threads = 64
buffer_size = "128M"
streams = 32
{% elif smartcopy_network_speed == '400g' %}
threads = 128
buffer_size = "256M"
streams = 64
{% endif %}

[security]
# Allowed paths for file operations
allowed_paths = ["/", "/home", "/data", "/mnt"]

# Deny paths (takes precedence over allowed)
denied_paths = ["/etc/shadow", "/etc/passwd"]

[logging]
level = "info"
file = "{{ smartcopy_log_dir }}/agent.log"

{% if smartcopy_quic_enabled %}
[quic]
enabled = true
port = {{ smartcopy_quic_port }}
bind = "{{ smartcopy_quic_bind }}"
cert_dir = "{{ smartcopy_data_dir }}/certs"
{% endif %}
